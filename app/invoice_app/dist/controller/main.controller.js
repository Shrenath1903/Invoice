var invoiceRef;sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox"],(e,o,t)=>{"use strict";return e.extend("invoiceapp.controller.main",{onInit(){},onPress:function(e){invoiceRef=this;const o=e.getSource().getBindingContext().getObject().po_no;const t=e.getSource().getBindingContext();var n=`/PDFEntity(po_no=${o})`;const a=t.getModel().sServiceUrl;const i=a.indexOf("/")===2?a.substring(2):a;const r=i+n+"/pdf";window.open(r,"_blank")},fileupload:function(){let e=this.getView().byId("uploader");let o=new sap.ui.unified.FileUploaderParameter;o.setName("slug");o.setValue(e.getProperty("value"));e.removeHeaderParameter("slug");e.addHeaderParameter(o);e.checkFileReadable().then(function(){e.upload()}).catch(function(){showError("The file cannot be read");setDialogBusy(false)})},onNavigation:function(e){var o=e.getSource().getBindingContext().getProperty("po_no");sap.m.MessageToast.show("clicked");this.getOwnerComponent().getRouter().navTo("edit",{po_no:o})},offline:function(e){this.getOwnerComponent().getRouter().navTo("edit",{po_no:"temp"})},onFileAllowed:function(){var e=this.getView().getModel();var o="/Files";e.create(o,data,{success:function(e,o){t.success("Data successfully created")},error:function(e){t.error("Error while creating the data")}})},onUploadComplete:function(e){var t=this.byId("uploader");var n=t.oFileUpload.files[0];if(n){this._createEntity(n).then(e=>{this._uploadContent(n,e)}).catch(e=>{console.error("Error during entity creation:",e)})}else{o.show("No file uploaded or accessible.")}},_createEntity:function(e){var o={mediaType:e.type,fileName:e.name,size:e.size};var t={url:"/odata/v2/invoice-service/Files",method:"POST",data:JSON.stringify(o)};return new Promise((e,o)=>{$.ajax(t).done(o=>{e(o.d.ID)}).fail(e=>{o(e)})})},_uploadContent:function(e,t){var n=`/odata/v2/invoice-service/Files(${t})/content`;var a=new FormData;a.append("file",e);$.ajax({url:n,method:"PUT",processData:false,data:a,success:function(){o.show("File uploaded successfully.")},error:function(e){console.error("Error during file upload:",e);o.show("File upload failed.")}})}})});
//# sourceMappingURL=main.controller.js.map