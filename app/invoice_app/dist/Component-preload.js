//@ui5-bundle invoiceapp/Component-preload.js
sap.ui.require.preload({
	"invoiceapp/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","invoiceapp/model/models"],(e,i)=>{"use strict";return e.extend("invoiceapp.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(i.createDeviceModel(),"device");this.getRouter().initialize()}})});
},
	"invoiceapp/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("invoiceapp.controller.main",{onInit(){}})});
},
	"invoiceapp/controller/edit.controller.js":'var invoiceRef;sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageBox","./validation","sap/ui/core/Fragment"],(e,t,o,i,a)=>{"use strict";return e.extend("invoiceapp.controller.edit",{onInit(e){invoiceRef=this;var o=new t;this.getView().setModel(o,"invoiceModel");var i=new t;this.getView().setModel(i,"invoiceItemModel");var a=new t;this.getView().setModel(a,"visibilityModel");var n=new t;this.getView().setModel(n,"mailModel");var r=this.getOwnerComponent().getRouter();r.getRoute("edit").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){var t=e.getParameter("arguments");var o=this.getView().getModel("visibilityModel");if(t.po_no!="temp"){o.setProperty("/v_local",false);o.setProperty("/v_db",true);this.po_no=t.po_no;this.loadData(this.po_no)}else{o.setProperty("/v_local",true);o.setProperty("/v_db",false)}},loadData:function(e){var t=this.getView().getModel("invoiceModel");var o=this.getView().getModel();var i=`/Invoice(po_no=${e})`;o.read(i,{urlParameters:{$expand:"Items"},success:function(e,o){var i=e;if(e.Items){invoiceRef.loadInvoiceItemModel(e)}t.setData(e);console.log(i)},error:function(e){sap.m.MessageToast.show("Error downloading PDF");console.error("Error downloading PDF:",e)}})},loadInvoiceItemModel:function(e){var t=e.Items.results;var o=this.getView().getModel("invoiceItemModel");o.setData({invoiceItems:t});console.log(o)},updateInvoice:function(){var e=this.getView().getModel("invoiceModel");var t=e.oData;delete t.createdBy;delete t.createdAt;console.log(t);var i=`/Invoice(po_no=${this.po_no})`;var a=this.getView().getModel();a.update(i,t,{success:function(e,t){o.success("Successfully Updated")},error:function(e){o.error("Error while updating the data")}})},onDownloadPDF:function(e){if(e&&e.getParameter){var t=e}else{var t=this.po_no}var o=`/PDFEntity(po_no=${t})`;var i=this.getView().getModel().sServiceUrl;var a=i.indexOf("/")===2?i.substring(2):i;var n=a+o+"/pdf";window.open(n,"_blank")},downloadInvoice:function(e){if(this._oDialog)this._oDialog.close();var t=this.getView().getModel("invoiceModel");var o=this.getView().getModel("invoiceItemModel");var i=t.oData;var a=[];if(o.getData().invoiceItems){a=o.getData().invoiceItems}for(var n=0;a.length>n;n++){a[n].po_no_po_no=this.po_no}i.Items=o.oData.invoiceItems;if(i){this._createEntity(i)}else{MessageToast.show("No data was there.")}},_createEntity:function(e){console.log(e);var t=this.getView().getModel();var o=`/Invoice`;t.create(o,e,{success:function(e,t){invoiceRef.po_no=e.po_no;invoiceRef.onDownloadPDF()},error:function(e){sap.m.MessageToast.show("Error downloading PDF");console.error("Error downloading PDF:",e)}})},onAddItem:function(){var e=this.getView().getModel("invoiceItemModel");var t={description:"",qty:"",rate:"",amount:""};var o=e.getProperty("/invoiceItems")||[];o.push(t);e.setProperty("/invoiceItems",o)},testData:function(){var e={invoice_no:"101",date:"",company_name:"sap",Company_gst_no:"37B76C238B7E1Z5",bill_to:"Germany",ship_to:"Pondy",payment_terms:"Cash",due_date:"",sub_total:"4500",discount:"200",discountPercent:"10",tax:"500",shipping:"300",total:"5000",amount_paid:"100",balance_due:"4900",Notes:"Good",Terms:"no",Currency:"Rs"};var t=this.getView().getModel("invoiceModel");t.setData(e);var o=this.getView().getModel("invoiceItemModel");var i={description:"cpu",qty:"10",rate:"45",amount:"4500"};var a=o.getProperty("/invoiceItems")||[];a.push(i);o.setProperty("/invoiceItems",a)},onNumbervalidation:function(e){validateNumber(e)},onCalAmount:function(e){console.log(e);invoiceRef.setInitialSelectState(e);var t=this.byId("invoiceTable");var o=t.getItems();var i=this.getView().getModel("invoiceItemModel");var a=i.getData();o.forEach((e,t)=>{var o=e.getBindingContext("invoiceItemModel").getObject();var i=parseFloat(o.qty)||0;var n=parseFloat(o.rate)||0;o.amount=i*n;a.invoiceItems[t].amount=o.amount});i.refresh();invoiceRef.calculateSubTotal(e)},calculateSubTotal:function(e){invoiceRef.setInitialSelectState(e);var t=this.getView().getModel("invoiceItemModel");var o=this.getView().getModel("invoiceModel");var i=t.getProperty("/invoiceItems");var a=i.reduce((e,t)=>e+(parseFloat(t.amount)||0),0);o.setProperty("/sub_total",a)},onDiscounted:function(e){invoiceRef.setInitialSelectState(e);var t=this.getView().getModel("invoiceModel");var o=t.getProperty("/sub_total");var i=t.getProperty("/discountPercent");if(o){var a=o*i/100;t.setProperty("/discount",a)}},onCalculateTotal:function(e){invoiceRef.setInitialSelectState(e);var t=this.getView().getModel("invoiceModel");var o=parseFloat(t.getProperty("/discount"))||0;var i=parseFloat(t.getProperty("/tax"))||0;var a=parseFloat(t.getProperty("/shipping"))||0;var n=o*i/100;var r=o+n+a;t.setProperty("/total",r.toFixed(2))},onCalAmtPaid:function(e){invoiceRef.setInitialSelectState(e);var t=this.getView().getModel("invoiceModel");var o=parseFloat(t.getProperty("/total"))||0;var i=parseFloat(t.getProperty("/amount_paid"))||0;var a=o-i;t.setProperty("/balance_due",a)},onDeleteItem:function(e){var t=e.getSource().getBindingContext("invoiceItemModel");var o=t.getPath();var i=this.getView().getModel("invoiceItemModel");var a=i.getProperty("/invoiceItems");var n=parseInt(o.split("/").pop(),10);a.splice(n,1);i.setProperty("/invoiceItems",a)},setInitialSelectState:function(e){e.getSource().setValueState("None")},onValidation:function(e){invoiceRef.setInitialSelectState(e)},onOpenPopover:function(){var e=this.getView();if(!this._oDialog){this._oDialog=sap.ui.xmlfragment(e.getId(),"invoiceapp.view.InputPopover",this);e.addDependent(this._oDialog);this._oDialog.open()}else{this._oDialog.open()}},onCloseDialog:function(){if(this._oDialog){this._oDialog.close()}},onSubmit:function(){var e=this.getView().getModel("mailModel").oData;var t=e.mail_id;var o=e.text;if(!t){MessageToast.show("Please provide Mail Id.");return}var i={mail_id:t,text:o};var a=this.getView().getModel();var n="/mail";a.create(n,i,{success:function(e,t){MessageToast.show("Mail Send !")},error:function(e){var t=JSON.parse(e.responseText);cegControllerRef._showServiceError(t);inputEnableModel.setProperty("/busy",false)}});this._oDialog.close()}})});\n',
	"invoiceapp/controller/main.controller.js":'var invoiceRef;sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox"],(e,o,t)=>{"use strict";return e.extend("invoiceapp.controller.main",{onInit(){},onPress:function(e){invoiceRef=this;const o=e.getSource().getBindingContext().getObject().po_no;const t=e.getSource().getBindingContext();var n=`/PDFEntity(po_no=${o})`;const a=t.getModel().sServiceUrl;const i=a.indexOf("/")===2?a.substring(2):a;const r=i+n+"/pdf";window.open(r,"_blank")},fileupload:function(){let e=this.getView().byId("uploader");let o=new sap.ui.unified.FileUploaderParameter;o.setName("slug");o.setValue(e.getProperty("value"));e.removeHeaderParameter("slug");e.addHeaderParameter(o);e.checkFileReadable().then(function(){e.upload()}).catch(function(){showError("The file cannot be read");setDialogBusy(false)})},onNavigation:function(e){var o=e.getSource().getBindingContext().getProperty("po_no");sap.m.MessageToast.show("clicked");this.getOwnerComponent().getRouter().navTo("edit",{po_no:o})},offline:function(e){this.getOwnerComponent().getRouter().navTo("edit",{po_no:"temp"})},onFileAllowed:function(){var e=this.getView().getModel();var o="/Files";e.create(o,data,{success:function(e,o){t.success("Data successfully created")},error:function(e){t.error("Error while creating the data")}})},onUploadComplete:function(e){var t=this.byId("uploader");var n=t.oFileUpload.files[0];if(n){this._createEntity(n).then(e=>{this._uploadContent(n,e)}).catch(e=>{console.error("Error during entity creation:",e)})}else{o.show("No file uploaded or accessible.")}},_createEntity:function(e){var o={mediaType:e.type,fileName:e.name,size:e.size};var t={url:"/odata/v2/invoice-service/Files",method:"POST",data:JSON.stringify(o)};return new Promise((e,o)=>{$.ajax(t).done(o=>{e(o.d.ID)}).fail(e=>{o(e)})})},_uploadContent:function(e,t){var n=`/odata/v2/invoice-service/Files(${t})/content`;var a=new FormData;a.append("file",e);$.ajax({url:n,method:"PUT",processData:false,data:a,success:function(){o.show("File uploaded successfully.")},error:function(e){console.error("Error during file upload:",e);o.show("File upload failed.")}})}})});\n',
	"invoiceapp/controller/validation.js":'function onDecimalLiveChange(e){var t=e.getSource();var a=t.getValue();var r=/^[0-9]*(\\.[0-9]{0,2})?$/;if(a.match(r)){}else{a=a.slice(0,a.length-1);t.setValue(a);return}var l=/^[0-9]*(\\.[0-9]{0,2})?$/;try{if(l.test(a)){t.setValueState(sap.ui.core.ValueState.None)}else{t.setValueState(sap.ui.core.ValueState.Error)}}catch(e){t.setValueState(sap.ui.core.ValueState.Error)}}function validateNumber(e){var t=e.getSource();var a=t.getValue();var r=/^[0-9]+$/;if(a.match(r)){}else{a=a.slice(0,a.length-1);t.setValue(a);t.setValueStateText("Only Number");t.setValueState("Error")}if(a.match(r)){}else{t.setValue("")}}\n',
	"invoiceapp/i18n/i18n.properties":'# This is the resource bundle for invoiceapp\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=App Title\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=Invoice\n\n#XFLD,33\nflpTitle=invoice_app\n\nDownloadingPdf = Downloading PDF',
	"invoiceapp/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"invoiceapp","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.15.5","toolsId":"5b99ba6f-80b9-441e-b2e1-de18ec48ed6d"},"dataSources":{"mainService":{"uri":"odata/v2/invoice-service/","type":"OData","settings":{"annotations":[],"odataVersion":"2.0"}}},"crossNavigation":{"inbounds":{"invoice_app-invoice_app":{"semanticObject":"invoice_app","action":"invoice_app","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"dependencies":{"minUI5Version":"1.130.0","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"invoiceapp.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"invoiceapp.view"},"routes":[{"name":"Routemain","pattern":":?query:","target":["Targetmain"]},{"pattern":"Invoice/{po_no}","name":"edit","target":"edit"}],"targets":{"Targetmain":{"id":"main","name":"main"},"edit":{"viewName":"edit","viewId":"edit"}}},"rootView":{"viewName":"invoiceapp.view.App","type":"XML","id":"App"}}}',
	"invoiceapp/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"invoiceapp/view/App.view.xml":'<mvc:View controllerName="invoiceapp.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"invoiceapp/view/InputPopover.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m"><Dialog id="inputDialog" title="Enter Details"><VBox class="sapUiSmallMargin"><Label text="Mail ID" /><Input value="{invoiceModel>/mail_id}" /><Label text="text" /><Input value="{invoiceModel>/text}" /></VBox><beginButton><Button text="Submit" press=".downloadInvoice" /></beginButton><endButton><Button text="Cancel" press=".onCloseDialog" /></endButton></Dialog></core:FragmentDefinition>\n',
	"invoiceapp/view/edit.view.xml":'<mvc:View\n    controllerName="invoiceapp.controller.edit"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:core="sap.ui.core"\n\txmlns:m="sap.m"\n\txmlns="sap.uxap"\n\txmlns:f="sap.ui.layout.form"><m:Page\n        id="messageHandlingPage"\n        busy="{busyIndicatorModel>/busy}"\n        showHeader="false"><ObjectPageLayout\n            id="ObjectPageLayout"\n            upperCaseAnchorBar="false"\n            showFooter="true"><headerContent><m:Title\n                    text="Invoice Generator"\n                    level="H4"\n                    class="customTitleLarge"/></headerContent><sections><ObjectPageSection title="Invoice Header"><subSections><ObjectPageSubSection><f:SimpleForm\n                                editable="true"\n                                layout="ColumnLayout"\n                                columnsM="2"\n                                columnsL="2"\n                                columnsXL="4"\n                            ><f:content><m:Label text="Purchase Order Number" /><m:Input\n                                        width="50%"\n                                        value="{invoiceModel>/po_no}" liveChange="onNumbervalidation" change="onValidation"\n                                    /><m:Label text="Invoice Number" /><m:Input change="onValidation"\n                                        width="50%"\n                                        value="{invoiceModel>/invoice_no}" liveChange="onNumbervalidation"\n                                    /><m:Label text="Date" /><m:DatePicker\n                                        width="50%"\n                                        value="{\'path\':\'invoiceModel>/date\',\'type\':\'sap.ui.model.type.Date\',\'formatOptions\': {\'pattern\': \'dd-MM-yyyy\'}}"\n                                    /><m:Label text="Company Name" /><m:Input\n                                        width="50%"\n                                        value="{invoiceModel>/company_name}"\n                                    /><m:Label text="Payment Terms" /><m:Input\n                                        width="50%"\n                                        value="{invoiceModel>/payment_terms}"\n                                    /><m:Label text="Due Date" /><m:DatePicker\n                                        width="50%"\n                                        placeholder="Select Due Date"\n                                        value="{\'path\':\'invoiceModel>/due_date\',\'type\':\'sap.ui.model.type.Date\',\'formatOptions\': {\'pattern\': \'dd-MM-yyyy\'}}"\n                                        displayFormat="MM/dd/yyyy"\n                                    /><m:Label text="Bill To" /><m:Input  width="50%"\n                                       \n                                        value="{invoiceModel>/bill_to}"\n                                    /><m:Label text="Ship To" /><m:Input\n                                        width="50%"\n                                        value="{invoiceModel>/ship_to}"\n                                    /><m:Label\n                                        text="Currency"\n                                        wrapping="true"\n                                    /><m:Select width="50%"><core:Item\n                                            key="selectOption"\n                                            text="--SELECT CURRENCY--"\n                                        /><core:Item\n                                            key="INR"\n                                            text="INR (₹)"\n                                        /><core:Item\n                                            key="USD"\n                                            text="USD ($)"\n                                        /></m:Select><m:Label text="Notes" /><m:Input\n                                        width="50%"\n                                        value="{invoiceModel>/Notes}"\n                                    /></f:content></f:SimpleForm></ObjectPageSubSection></subSections></ObjectPageSection><ObjectPageSection title="Invoice Items"><subSections><ObjectPageSubSection><m:Table\n                                id="invoiceTable"\n                                items="{invoiceItemModel>/invoiceItems}"\n                                inset="false"\n                                width="100%"><m:headerToolbar><m:Toolbar><m:Title text="Line Items" /><m:ToolbarSpacer /><m:Button\n                                            text="Add Item"\n                                            press=".onAddItem"\n                                        /></m:Toolbar></m:headerToolbar><m:columns><m:Column><m:Text text="Description" /></m:Column><m:Column><m:Text text="Quantity" /></m:Column><m:Column><m:Text text="Rate" /></m:Column><m:Column><m:Text text="Amount" /></m:Column><m:Column><m:Text text="Actions" /></m:Column></m:columns><m:items><m:ColumnListItem><m:cells><m:Input placeholder="Enter Description" value="{invoiceItemModel>description}"/><m:Input width="55%" type="Number" placeholder="Qty" value="{invoiceItemModel>qty}" liveChange="onNumbervalidation" change="onValidation"/><m:Input width="55%" type="Number" placeholder="Rate"  value="{invoiceItemModel>rate}" change=".onCalAmount" liveChange="onNumbervalidation"/><m:Text text="{invoiceItemModel>amount}" /><m:Button text="Delete" type="Reject"  press=".onDeleteItem"/></m:cells></m:ColumnListItem></m:items></m:Table></ObjectPageSubSection></subSections></ObjectPageSection></sections><ObjectPageSection title="Invoice Details"><subSections><ObjectPageSubSection><f:SimpleForm\n                            editable="true"\n                            layout="ColumnLayout"\n                            columnsM="2"\n                            columnsL="2"\n                            columnsXL="4"\n                        ><f:content><m:Label text="Subtotal" /><m:Text  width="50%" text="{invoiceModel>/sub_total}" /><m:Label text="Discount Percentage" /><m:Input width="50%" value="{invoiceModel>/discountPercent}" change="onDiscounted" liveChange="onNumbervalidation"/><m:Label text="Discounted Value" /><m:Text width="50%" text="{invoiceModel>/discount}"/><m:Label text="Tax" /><m:Input width="50%" value="{invoiceModel>/tax}" change="onCalculateTotal" liveChange="onNumbervalidation"/><m:Label text="Shipping" /><m:Input width="50%"  value="{invoiceModel>/shipping}" change="onCalculateTotal" liveChange="onNumbervalidation"/><m:Label text="Total" /><m:Text width="50%" text="{invoiceModel>/total}"/><m:Label text="Amount Paid" /><m:Input width="50%" value="{invoiceModel>/amount_paid}" change="onCalAmtPaid" liveChange="onNumbervalidation"\t/><m:Label text="Balance Due" /><m:Text width="50%" text="{invoiceModel>/balance_due}"/></f:content></f:SimpleForm></ObjectPageSubSection></subSections></ObjectPageSection><footer><m:Bar><m:contentRight><m:Button\n                            text="Update"\n                            type="Emphasized"\n                            press=".updateInvoice"\n                            visible="{visibilityModel>/v_db}"\n                        /><m:Button\n                            text="Download PDF"\n                            press=".onDownloadPDF"\n                            visible="{visibilityModel>/v_db}"\n                        /><m:Button\n                            text="Download Pdf"\n                            press=".downloadInvoice"\n                            visible="{visibilityModel>/v_local}"\n                        /><m:Button\n                            text="Test Data"\n                            press=".testData"\n                            visible="{visibilityModel>/v_local}"\n                        /><m:Button text="Send Mail" press=".onOpenPopover" /></m:contentRight></m:Bar></footer></ObjectPageLayout></m:Page></mvc:View>\n',
	"invoiceapp/view/main.view.xml":'<mvc:View controllerName="invoiceapp.controller.main"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:core="sap.ui.core"\n\txmlns:u="sap.ui.unified"\n\txmlns:upload="sap.m.upload"\n    xmlns="sap.m"><Page id="page" title="{i18n>title}"><u:FileUploader\n            id="uploader"\n            fileType="xlsx"\n            multiple="false"\n            fileEmpty=".onFileEmpty"\n            typeMissmatch=".onTypeMismatch"\n            sendXHR="true"\n            useMultipart="false"\n            placeholder="Choose an Excel file..."\n            httpRequestMethod="Put"\n            uploadOnChange="true"\n            uploadComplete=".onUploadComplete"\n            width="100%" /><Button press=".fileupload" text="Upload"></Button><ScrollContainer width="100%" horizontal="true" vertical="false"><Table id="idInvoiceTable"\n\t\tinset="false"\n\t\titems="{path: \'/Invoice\'}"\n\t\twidth="auto"><headerToolbar><OverflowToolbar><content><Title text="Invoice" level="H2"/></content></OverflowToolbar></headerToolbar><columns><Column ><Text text="PO No." /></Column><Column ><Text text="Invoice No." /></Column><Column ><Text text="Date" /></Column><Column ><Text text="Company Name" /></Column><Column ><Text text="Bill To" /></Column><Column ><Text text="Ship To" /></Column><Column><Text text="Total" /></Column><Column ><Text text="Amount Paid" /></Column><Column ><Text text="Balance Due" /></Column><Column ><Text text="Download" /></Column></columns><items><ColumnListItem vAlign="Middle" type="Active" press="onNavigation"><cells><ObjectIdentifier title="{po_no}" /><Text text="{invoice_no}" /><Text text="{path: \'date\', type: \'sap.ui.model.type.Date\', formatOptions: { style: \'medium\' }}" /><Text text="{company_name}" /><Text text="{bill_to}" /><Text text="{ship_to}" /><Text text="{total}" /><Text text="{amount_paid}"  /><Text text="{balance_due}" /><Button icon="sap-icon://download"  press="onPress"/></cells></ColumnListItem></items></Table></ScrollContainer><footer><Bar><contentRight><Button\n                            text="Enter Invoice"\n                            type="Emphasized"\n                            press=".offline"\n                        /><Button\n                            text="Download PDF"\n                            press=".onDownloadPDF"\n                        /></contentRight></Bar></footer></Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
